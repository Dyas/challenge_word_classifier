'use strict';
module.exports = test;

var table = {
    "a": {"a": 32713, "e": 34760, "i": 26637, "o": 20068, "u": 21093, "y": 9328, "b": 20275, "c": 32341, "d": 17925, "f": 4074, "g": 14884, "h": 11609, "j": 907, "k": 6482, "l": 67277, "m": 22253, "n": 79025, "p": 18346, "q": 800, "r": 67310, "s": 32651, "t": 66565, "v": 6866, "w": 4456, "x": 2474, "z": 3277, "'": 15805},
    "e": {"a": 25732, "e": 13490, "i": 8421, "o": 8243, "u": 7060, "y": 4836, "b": 5554, "c": 19772, "d": 40493, "f": 5652, "g": 7108, "h": 2603, "j": 644, "k": 1618, "l": 35482, "m": 19249, "n": 64886, "p": 13034, "q": 1320, "r": 112309, "s": 91662, "t": 30323, "v": 5984, "w": 4443, "x": 7412, "z": 1037, "'": 24302},
    "i": {"a": 37346, "e": 26704, "i": 1136, "o": 35148, "u": 4672, "y": 294, "b": 7366, "c": 50531, "d": 24231, "f": 8853, "g": 11645, "h": 731, "j": 339, "k": 4225, "l": 30832, "m": 13488, "n": 99877, "p": 11429, "q": 849, "r": 12804, "s": 67119, "t": 40859, "v": 11625, "w": 315, "x": 1353, "z": 5115, "'": 3547},
    "o": {"a": 6127, "e": 4818, "i": 8910, "o": 13531, "u": 27951, "y": 2151, "b": 8121, "c": 17517, "d": 13253, "f": 3510, "g": 16473, "h": 1940, "j": 329, "k": 3521, "l": 30551, "m": 26741, "n": 78989, "p": 23634, "q": 502, "r": 47650, "s": 25292, "t": 21225, "v": 9731, "w": 8418, "x": 3124, "z": 1422, "'": 3829},
    "u": {"a": 6910, "e": 6231, "i": 6943, "o": 1559, "u": 138, "y": 371, "b": 7900, "c": 7690, "d": 6028, "f": 1745, "g": 4250, "h": 303, "j": 208, "k": 1327, "l": 21304, "m": 14973, "n": 35933, "p": 7668, "q": 124, "r": 25184, "s": 31586, "t": 14585, "v": 846, "w": 113, "x": 769, "z": 636, "'": 848},
    "y": {"a": 4105, "e": 3141, "i": 2217, "o": 2836, "u": 477, "y": 35, "b": 1042, "c": 4021, "d": 2437, "f": 381, "g": 1469, "h": 348, "j": 32, "k": 250, "l": 6384, "m": 3978, "n": 4505, "p": 5680, "q": 8, "r": 3599, "s": 6103, "t": 3746, "v": 301, "w": 592, "x": 372, "z": 250, "'": 9552},
    "b": {"a": 14462, "e": 14612, "i": 15001, "o": 11642, "u": 8278, "y": 1242, "b": 3029, "c": 553, "d": 657, "f": 198, "g": 122, "h": 278, "j": 374, "k": 83, "l": 16165, "m": 364, "n": 286, "p": 263, "q": 12, "r": 9496, "s": 2398, "t": 665, "v": 196, "w": 157, "x": 4, "z": 16, "'": 476},
    "c": {"a": 33214, "e": 23759, "i": 18049, "o": 36403, "u": 11223, "y": 5230, "b": 44, "c": 3709, "d": 95, "f": 27, "g": 23, "h": 33894, "j": 0, "k": 12911, "l": 7711, "m": 101, "n": 407, "p": 61, "q": 324, "r": 12602, "s": 1816, "t": 15094, "v": 9, "w": 33, "x": 2, "z": 99, "'": 1932},
    "d": {"a": 16979, "e": 34947, "i": 29568, "o": 13843, "u": 5353, "y": 3023, "b": 778, "c": 386, "d": 3410, "f": 605, "g": 1906, "h": 961, "j": 414, "k": 112, "l": 4280, "m": 1175, "n": 2503, "p": 328, "q": 21, "r": 8305, "s": 5602, "t": 413, "v": 680, "w": 1024, "x": 5, "z": 129, "'": 5085},
    "f": {"a": 5553, "e": 7789, "i": 10849, "o": 8368, "u": 5429, "y": 1153, "b": 83, "c": 79, "d": 65, "f": 5405, "g": 53, "h": 73, "j": 14, "k": 53, "l": 6107, "m": 97, "n": 131, "p": 54, "q": 2, "r": 4251, "s": 622, "t": 2117, "v": 5, "w": 60, "x": 3, "z": 7, "'": 611},
    "g": {"a": 12893, "e": 19349, "i": 13306, "o": 8057, "u": 6182, "y": 3035, "b": 387, "c": 100, "d": 294, "f": 236, "g": 3562, "h": 5272, "j": 37, "k": 104, "l": 7850, "m": 1278, "n": 4257, "p": 125, "q": 5, "r": 11499, "s": 4969, "t": 596, "v": 36, "w": 409, "x": 0, "z": 34, "'": 4917},
    "h": {"a": 25614, "e": 30880, "i": 25659, "o": 24480, "u": 5293, "y": 11694, "b": 593, "c": 270, "d": 265, "f": 408, "g": 166, "h": 204, "j": 33, "k": 229, "l": 3047, "m": 1816, "n": 2097, "p": 315, "q": 27, "r": 6617, "s": 1930, "t": 4244, "v": 147, "w": 848, "x": 0, "z": 41, "'": 3540},
    "j": {"a": 2353, "e": 1609, "i": 844, "o": 1647, "u": 1996, "y": 14, "b": 2, "c": 11, "d": 25, "f": 0, "g": 4, "h": 9, "j": 13, "k": 20, "l": 15, "m": 10, "n": 39, "p": 16, "q": 0, "r": 34, "s": 26, "t": 7, "v": 3, "w": 5, "x": 0, "z": 0, "'": 39},
    "k": {"a": 4842, "e": 13078, "i": 8619, "o": 2289, "u": 969, "y": 1260, "b": 486, "c": 145, "d": 150, "f": 358, "g": 85, "h": 1074, "j": 63, "k": 340, "l": 2123, "m": 497, "n": 1213, "p": 263, "q": 5, "r": 701, "s": 3731, "t": 536, "v": 152, "w": 546, "x": 3, "z": 6, "'": 2746},
    "l": {"a": 42408, "e": 58149, "i": 54234, "o": 30364, "u": 10676, "y": 23839, "b": 1770, "c": 2299, "d": 5367, "f": 1754, "g": 1454, "h": 568, "j": 60, "k": 1739, "l": 35504, "m": 2900, "n": 2047, "p": 2349, "q": 41, "r": 408, "s": 6071, "t": 6282, "v": 2048, "w": 643, "x": 25, "z": 153, "'": 5041},
    "m": {"a": 32395, "e": 30153, "i": 27165, "o": 18901, "u": 6520, "y": 4078, "b": 7463, "c": 202, "d": 198, "f": 422, "g": 88, "h": 163, "j": 31, "k": 92, "l": 656, "m": 5825, "n": 1622, "p": 10704, "q": 14, "r": 293, "s": 5406, "t": 196, "v": 145, "w": 196, "x": 2, "z": 31, "'": 5604},
    "n": {"a": 30826, "e": 56381, "i": 37476, "o": 29206, "u": 5409, "y": 3109, "b": 2323, "c": 20669, "d": 25616, "f": 4645, "g": 47352, "h": 2178, "j": 869, "k": 4120, "l": 2507, "m": 2120, "n": 8592, "p": 2924, "q": 691, "r": 2631, "s": 26222, "t": 45588, "v": 2811, "w": 1426, "x": 186, "z": 1073, "'": 18248},
    "p": {"a": 18685, "e": 26098, "i": 16009, "o": 19094, "u": 5941, "y": 2551, "b": 337, "c": 222, "d": 161, "f": 289, "g": 113, "h": 25559, "j": 42, "k": 138, "l": 10572, "m": 377, "n": 720, "p": 5963, "q": 5, "r": 20054, "s": 6325, "t": 6951, "v": 30, "w": 288, "x": 1, "z": 11, "'": 1341},
    "q": {"a": 74, "e": 8, "i": 50, "o": 5, "u": 8983, "y": 1, "b": 4, "c": 0, "d": 2, "f": 3, "g": 1, "h": 2, "j": 0, "k": 0, "l": 2, "m": 1, "n": 2, "p": 2, "q": 8, "r": 8, "s": 13, "t": 8, "v": 2, "w": 6, "x": 0, "z": 0, "'": 24},
    "r": {"a": 58345, "e": 61834, "i": 59456, "o": 49317, "u": 10471, "y": 12090, "b": 5288, "c": 9145, "d": 10824, "f": 2506, "g": 6690, "h": 3021, "j": 311, "k": 3907, "l": 5128, "m": 10536, "n": 8122, "p": 5516, "q": 290, "r": 9958, "s": 20631, "t": 15169, "v": 3070, "w": 1604, "x": 34, "z": 372, "'": 12872},
    "s": {"a": 16846, "e": 40170, "i": 28650, "o": 14241, "u": 14889, "y": 4427, "b": 1686, "c": 14869, "d": 597, "f": 841, "g": 470, "h": 18979, "j": 108, "k": 3855, "l": 5250, "m": 13730, "n": 4618, "p": 12763, "q": 1586, "r": 479, "s": 37293, "t": 55853, "v": 1158, "w": 2404, "x": 0, "z": 104, "'": 14789},
    "t": {"a": 34734, "e": 67035, "i": 75584, "o": 35448, "u": 11301, "y": 11217, "b": 920, "c": 3144, "d": 325, "f": 1115, "g": 491, "h": 27206, "j": 137, "k": 184, "l": 5214, "m": 1547, "n": 1338, "p": 659, "q": 21, "r": 30886, "s": 12301, "t": 11667, "v": 246, "w": 1900, "x": 7, "z": 1182, "'": 9810},
    "v": {"a": 8385, "e": 25455, "i": 13768, "o": 3844, "u": 682, "y": 282, "b": 1, "c": 19, "d": 29, "f": 1, "g": 20, "h": 7, "j": 0, "k": 43, "l": 100, "m": 5, "n": 68, "p": 7, "q": 0, "r": 256, "s": 176, "t": 20, "v": 105, "w": 2, "x": 0, "z": 10, "'": 210},
    "w": {"a": 8625, "e": 6083, "i": 5841, "o": 5930, "u": 212, "y": 326, "b": 454, "c": 147, "d": 463, "f": 244, "g": 90, "h": 2250, "j": 11, "k": 344, "l": 1077, "m": 301, "n": 2266, "p": 207, "q": 2, "r": 1171, "s": 1322, "t": 334, "v": 26, "w": 129, "x": 0, "z": 42, "'": 655},
    "x": {"a": 1585, "e": 1799, "i": 3251, "o": 1225, "u": 447, "y": 1087, "b": 89, "c": 831, "d": 30, "f": 85, "g": 20, "h": 282, "j": 0, "k": 5, "l": 117, "m": 79, "n": 26, "p": 1303, "q": 17, "r": 19, "s": 158, "t": 1701, "v": 30, "w": 60, "x": 18, "z": 4, "'": 741},
    "z": {"a": 2959, "e": 4758, "i": 2783, "o": 3043, "u": 295, "y": 655, "b": 103, "c": 49, "d": 51, "f": 14, "g": 27, "h": 129, "j": 3, "k": 78, "l": 448, "m": 91, "n": 58, "p": 34, "q": 12, "r": 45, "s": 66, "t": 59, "v": 42, "w": 39, "x": 0, "z": 1176, "'": 470},
    "'": {"a": 59, "e": 42, "i": 21, "o": 35, "u": 8, "y": 2, "b": 3, "c": 11, "d": 40, "f": 1, "g": 2, "h": 7, "j": 1, "k": 0, "l": 31, "m": 10, "n": 23, "p": 7, "q": 1, "r": 27, "s": 146640, "t": 42, "v": 16, "w": 5, "x": 0, "z": 0, "'": 0}
};

function compare(a, b) {
    var res = { "min": a, "max": 0 };
  
    if(b < res.min) {
      res.min = b;
      res.max = a;
    }
    else {
      res.min = a;
      res.max = b;
    }
  
  return res;
};

function test(buffer) {

	var arr_buff = new Uint8Array(buffer);

	var str = String.fromCharCode.apply(null, arr_buff);

	str = str.toLowerCase();

	var res = [];
	var conf = [];
	for (var i = 0; i < a.length; i++) {
		if(table[a[i]][a[i+1]]) {
			if(table[a[i]][a[i+1]] < 70) {
				return false;
			} else {
				res.push(table[a[i]][a[i+1]]);
			}
		}
	} 

	for (var i = 0; i < res.length; i++) {
		if(res[i] && res[i+1]) {
			var cmpr = compare(res[i], res[i+1]);
			conf.push(Number((cmpr.min / cmpr.max * 100).toFixed(2)));
		}
	}

	var cnt = 0;
	for (var i = 0; i < conf.length; i++) {
		if(conf[i] && conf[i+1]) {
			var cmpr = compare(conf[i], conf[i+1]);
			var tmp = cmpr.max / cmpr.min;
			if(tmp > 5) {
				cnt++;
				if(cnt >= 2) {
					return false;
				}
			}
		}
	}

	return true;
};