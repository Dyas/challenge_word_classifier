'use strict';var rows={},size=332283,bits,fl=(a)=>{return a+(a<<1)+(a<<4)+(a<<7)+(a<<8)+(a<<24);},fm=(a)=>{a+=a<<13;a^=a>>>7;a+=a<<3;a^=a>>>17;a+=a<<5;return a&0xffffffff;},fb=(a)=>{return fm(fl(a));},fa=(str)=>{var offset=2166136261,strLen=str.length,i,char,dChar;for(i=0;i<strLen;++i){char=str.charCodeAt(i);dChar=char&0xff00;if(dChar){offset=fl(offset^dChar>>8);}
    offset=fl(offset^char&0xff);}
    return fm(offset);},gI=(v)=>{var ch=1,indices=new Uint32Array(new ArrayBuffer(4*ch)),hash1=fa(v),hash2=fb(hash1),x=hash1%size,i;for(i=0;i<ch;++i){indices[i]=x<0?(x+size):x;x=(x+hash2)%size;}
    return indices;},bloomTest=(str)=>{var indices=gI(str+""),ch=1,i,idx;for(i=0;i<ch;++i){idx=indices[i];if((bits[Math.floor(idx / 8)]&(1<<(idx%8)))===0){return 0;}}
    return 1;},unpackRows=(data)=>{let a="abcdefghijklmnopqrstuvwxyz' ".split(""),i=0,r,parseRow=(r)=>("000000"+parseInt(r,16).toString(4)).slice(-7);a.map((l1)=>{if(l1==' ')return;a.map((l2)=>{a.map((l3)=>{if(l2==' '&&l3!=' ')return;(r=data[i++],(r?rows[(l1+l2+l3).trim()]=parseRow(r):0));});});});},unpackBits=(data)=>{bits=new Uint8Array(data.pop().match(/.{8}/g).map((i)=>parseInt(i,2)));};module.exports={init:(data)=>{let rawData=(data+"").split('\n');unpackRows(rawData);unpackBits(rawData);},test:(w)=>{var l=w.length,subs;subs=w.match(/.{1,3}/g);return!(l>20||l<3||subs.some((s,i)=>!rows[s]||!+rows[s][i])||subs.some((s,i)=>!bloomTest(s+(subs[i+1]||"")))||subs.reduce((m,v,i)=>m+1 / rows[v][i],0)>subs.length / 2)}};