//len 5:
h1 = {
    "e": "",
    "i": "A",
    "a": "A",
    "s": "A",
    "n": "",
    "r": "A",
    "o": "A",
    "t": "B",
    "l": "B",
    "c": "B",
    "u": "B",
    "d": "B",
    "p": "B",
    "m": "C",
    "h": "C",
    "g": "C",
    "b": "C",
    "y": "C",
    "f": "C",
    "v": "C",
    "k": "D",
    "j": "D",
    "q": "D",
    "w": "D",
    "x": "D",
    "z": "D",
    "2": "E"
}
h2 = {
	"e": "A",
	"i": "A",
	"a": "A",
	"s": "A",
	"n": "A",
	"r": "A",
	"o": "A",
	"t": "B",
	"l": "B",
	"c": "B",
	"u": "B",
	"d": "B",
	"p": "B",
	"m": "B",
	"h": "C",
	"g": "C",
	"b": "C",
	"y": "C",
	"f": "D",
	"v": "D",
	"k": "D",
	"j": "D",
	"q": "D",
	"w": "D",
	"x": "D",
	"z": "D",
	"2": "E"
    }
    //len 8,9,10:
h3 = {
    "e": "A",
    "i": "A",
    "a": "A",
    "s": "A",
    "n": "A",
    "r": "A",
    "o": "A",
    "t": "A",
    "l": "A",
    "c": "C",
    "u": "C",
    "d": "C",
    "p": "C",
    "m": "C",
    "h": "C",
    "g": "C",
    "b": "C",
    "y": "C",
    "f": "D",
    "v": "D",
    "k": "D",
    "j": "D",
    "q": "D",
    "w": "D",
    "x": "D",
    "z": "D",
    "2": "E"
}
h4 = {
    "e": "A",
    "i": "A",
    "a": "A",
    "s": "A",
    "n": "A",
    "r": "A",
    "o": "A",
    "t": "A",
    "l": "A",
    "c": "A",
    "u": "C",
    "d": "C",
    "p": "C",
    "m": "C",
    "h": "D",
    "g": "D",
    "b": "D",
    "y": "D",
    "f": "D",
    "v": "D",
    "k": "D",
    "j": "D",
    "q": "D",
    "w": "D",
    "x": "D",
    "z": "D",
    "2": "E"
}

var words_with_ap_pana_n_16 = ["a'asia","a'body","a'thing","ain't","akwa'ala","all'antica","all'italiana","all'ottava","amn't","an'a","an't","anybody'd","ar'n't","aren't","b'hoy","bahc'ae","baws'nt","betra'ying","bo's'ns","bo'suns","bos'ns","br'er","ca'canny","can't","cap'n","ch'an","ch'ing","cha'ah","could've","couldn't","cowslip'd","d'accord","d'aeth","d'albert","d'alembert","d'amboise","d'amour","d'andre","d'annunzio","d'arblay","d'arrest","d'art","d'artagnan","d'attoma","d'avenant","d'etat","d'ewart","d'holbach","d'iberville","d'ignazio","d'indy","d'inzeo","d'oeuvre","d'oria","d'urfey","daren't","dasn't","dassn't","der'a","didn't","doctors'commons","doesn't","dog'sbane","don't","don'ts","e'en","e'er","entr'actes","fa'ard","fatwa'd","fo'c's'les","fo'c'sles","freez'd","g'day","ge'ez","gi'd","gi'ing","guv'nors","h'm","ha'it","ha'nt","ha'p'orths","ha'pennies","ha'pennyworth","hadn't","hain't","hallowe'en","halo'd","han't","hasn't","haven't","he'd","he'll","her'n","his'n","how'd","how're","howe'er","i'd","i'faith","i'll","i'm","i've","idea'd","in't","isn't","it'd","it'll","j'accuse","j'adoube","j'ouvert","jews'harp","jusqu'auboutisme","jusqu'auboutist","jusqu'auboutiste","k'ri","ko'd","ko'ing","l'addition","l'allegro","l'aquila","l'avare","l'chaim","l'enfant","l'envoy","l'etranger","l'hospital","l'immoraliste","l'oeil","l'otage","l'tre","l'vov","landsm'al","los'te","m'ba","m'sieur","m'taggart","ma'am","mayn't","might've","mightn't","mu'adhdhin","mu'min","must've","mustn't","n'djamena","n'gana","n'importe","n't","nasta'liq","ne'er","ne'erday","needn't","nobody'd","nor'east","nor'easter","nor'west","nor'wester","north'ard","nuku'alofa","o'boyle","o'clock","o'dwyer","o'er","o'ertop","o'fallon","o'faolain","o'faolcin","o'fiaich","o'flaherty","o'hare","o'kelley","o'leary","o'shea","o'sullivan","ogee'd","ok'd","ok'ing","oughtn't","our'n","pa'anga","penn'orths","po'chaise","po'd","prud'hon","pyjama'd","qur'an","qur'anic","rec'd","s'elp","s'help","samh'in","san'a","schoolma'am","se'nnight","sec'y","sha'ban","shan't","she'd","she'll","she'ol","should've","shouldn't","silo'd","snipe'sbill","somebody'll","someone'll","sou'easter","sou'west","sou'wester","south'ard","stuns'ls","t'other","ta'en","ta'izz","tallyho'd","tell'd","that'd","that'll","there'd","there'll","they'd","they'll","they're","they've","this'll","tiara'd","to'd","today'll","trans'mute","unidea'd","usedn't","usen't","wasn't","we'd","we'll","we're","we've","weren't","what'd","what'll","what're","what've","whate'er","whatsoe'er","when'd","when'll","when're","whene'er","whensoe'er","where'd","where'er","where'll","where're","where've","wheresoe'er","who'd","who'll","who're","who've","why'd","why'll","why're","win't","wolf'smilk","won't","would've","wouldn't","wrong'uns","x'ing","y'all","ye'se","you'd","you'll","you're","you've","your'n","zu'lkadah"];
var words_with_ap_pana_n_16_cu_s = ["baha'i", "baha'ullah", "bo's'n", "bo'sun", "bos'n", "ch'in", "d'arezzo", "d'arcy", "d'estaing", "entr'acte", "fo'c's'le", "fo'c'sle", "guv'nor", "ha'p'orth", "ha'penny", "kinko's", "l'amour", "l'oreal", "l'ouverture", "levi's", "mcdonald's", "o'brien", "o'callaghan", "o'carroll", "o'casey", "o'connell", "o'conner", "o'connor", "o'dell", "o'doneven", "o'donnell", "o'donoghue", "o'donovan", "o'driscoll", "o'gowan", "o'grady", "o'hara", "o'higgins", "o'keeffe", "o'kelly", "o'mahony", "o'malley", "o'meara", "o'neil", "o'neill", "o'reilly", "o'rourke", "o'shee", "o'toole", "penn'orth", "shari'a", "shi'ite", "stuns'l", "t'ang", "wendy's", "wrong'un", "xi'an"];
var celeculen2 = ['jz', 'kx', 'pz', 'rk', 'tf', 'vh', 'wx', 'xf', 'xm', 'xy', 'yl', 'fk', 'gx', 'jw', 'ue', 'vy', 'yc', 'yg', 'yj', 'zw', 'fj', 'gf', 'gj', 'jn', 'jq', 'kk', 'kz', 'nn', 'pj', 'qk', 'rz', 'uq', 'wq', 'wz', 'xg', 'xj', 'ze', 'zq', 'zv', 'fq', 'gz', 'jx', 'kh', 'kq', 'mz', 'qj', 'vz', 'xz', 'yk', 'yw', 'yx', 'yz', 'zc', 'zm', 'ih', 'kf', 'lk', 'nk', 'qw', 'qx', 'sz', 'uf', 'uz', 'yq', 'zp', 'ej', 'ek', 'tj', 'uo', 'wj', 'wn', 'zj', 'zx', 'bj', 'cx', 'jb', 'jf', 'jk', 'jm', 'lq', 'mq', 'nx', 'oq', 'qo', 'tq', 'uj', 'uy', 'vk', 'xh', 'xk', 'zf', 'zh', 'zy', 'bq', 'fh', 'hx', 'jh', 'qg', 'qz', 'tz', 'vq', 'yh'];
var lista = [];

function init(data) {
    var fl = data.toString('utf8').split('\n');
    fl.forEach(function(word) {
        word1 = word.trim().split('').reverse().join('');
        lista.push(word1);
    });
}


function test(word) {
    var key = word;
    var key1 = key;
    if (key1.indexOf("'") > -1) {
        if (words_with_ap_pana_n_16.indexOf(key1) > -1 || words_with_ap_pana_n_16_cu_s.indexOf(key1) > -1  || words_with_ap_pana_n_16_cu_s.indexOf(key1.substring(0, key.length - 2)) > -1) {
            return 1;
        }
        if (key1.length == 1 || key1.length == 2 || key1.length == 4 || key1.length == 5 || key1.length == 6 || key1.length > 14) {
            return 0;
        } else {
            if (key1.substring(key.length - 2) == "'s") {
                if (key1.length == 3) {
                    if (key1[0] == "'") {
                        return 0;
                    } else {
                        return 1;
                    }
                }
                key1 = key.replace("'s", "");
				key1 = conversie_lista("2"+key1, key1.length);
                if (lista.indexOf(key1) == -1) {
                    return 0;
                }
                return 1;
            }
            return 0;
        }
    } else {
        if (key1.length == 1) {
            return 1;
        }
        if (key1.length == 2) {
            if (celeculen2.indexOf(key1) > -1) {
                return 0;
            } else {
                return 1;
            }
        }
        if (key1.length == 3 || key1.length == 4 || key1.length > 14) {
            return 0;
        }
        key1 = conversie_lista(key, key.length);
        if (lista.indexOf(key1) == -1) {
            key1 = conversie_lista('2'+key, key.length)
            if (lista.indexOf(key1) == -1){
                return 0;
            }
        }
        return 1;
    }
}

function conversie_lista(key123, len) {
    arr = key123.split('');
    if (len == 5) {
        for (elem in arr) {
			arr[elem] = h1[arr[elem]];
        }
    }else if (len < 8) {
        for (elem in arr) {
			arr[elem] = h2[arr[elem]];
        }
    } else if (len < 11) {
        for (elem in arr) {
			arr[elem] = h3[arr[elem]];
        }
    } else if(len <15) {
        for (elem in arr) {
			arr[elem] = h4[arr[elem]];
        }
    }
    return arr.join('');
}

module.exports = {
    init: function(data) {
        return init(data);
    },
    test: function(word) {
        return test(word);
    }
}