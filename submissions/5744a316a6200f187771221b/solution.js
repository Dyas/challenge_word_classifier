var matrix={},prefixes=[],bloom={},BF_SIZE=315171,BF_NUM_HASHES=5,NUM_CHARS=29;function indexOfChar(a){switch(a){case "^":return 0;case "'":return NUM_CHARS-2;case "$":return NUM_CHARS-1;default:return a.charCodeAt(0)-97+1}}function isDigit(a){return"0"<=a&&"9">=a}
exports.init=function(a){for(var b=0,c="",f="",d=0;d<a.length;++d){var e=String.fromCharCode(a[d]);if("\n"===e){++d;break}isDigit(e)?(b+=parseInt(e,10),c+=f.substr(0,b)):(c+=e,++b);3===b&&(prefixes.push(c),f=c,c="",b=0)}for(b=0;b<prefixes.length&&d<a.length;++b,d+=4)matrix[prefixes[b]]=a.readUInt32LE(d);bloom=a.slice(d)};function umul(a,b){return(a&65535)*b+(((a>>>16)*b&65535)<<16)&4294967295}function uadd(a,b){return(a&65535)+(b&65535)+(((a>>>16)+(b>>>16)&65535)<<16)}
function u(a){return(a&65535)+(a>>>16&65535)*Math.pow(2,16)}
function murmurhash3_32_gc(a,b){var c,f,d,e,g;c=a.length&3;f=a.length-c;d=b;for(g=0;g<f;)e=a.charCodeAt(g)&255|(a.charCodeAt(++g)&255)<<8|(a.charCodeAt(++g)&255)<<16|(a.charCodeAt(++g)&255)<<24,++g,e=umul(e,3432918353),e=e<<15|e>>>17,e=umul(e,461845907),d^=e,d=d<<13|d>>>19,d=uadd(umul(d,5),3864292196);e=0;switch(c){case 3:e^=(a.charCodeAt(g+2)&255)<<16;case 2:e^=(a.charCodeAt(g+1)&255)<<8;case 1:e^=a.charCodeAt(g)&255,e=umul(e,3432918353),e=umul(e<<15|e>>>17,461845907),d^=e}d^=a.length;d=umul(d^d>>>
16,2246822507);d=umul(d^d>>>13,3266489909);return(d^d>>>16)>>>0}function Hash(a){var b=[];b.push(murmurhash3_32_gc(a,0));b.push(murmurhash3_32_gc(a,42));return b}function nthHash(a,b,c,f){return u(uadd(b,umul(a,c)))%f}function getBit(a,b){return 0!=(a[b>>3]&1<<(b&7))}function checkWithBloom(a){a=Hash(a);for(var b=0;b<BF_NUM_HASHES;b++){var c=nthHash(b,a[0],a[1],BF_SIZE);if(!getBit(bloom,c))return!1}return!0}function getCharWeight(a,b){var c=1<<indexOfChar(b)-1,f=matrix[a];return f?f&c?1:0:0}
function getWordWeight(a){for(var b="^"+a[0]+a[1],c=2;c<a.length;++c){if(!getCharWeight(b,a[c]))return 0;b=b.substr(1)+a[c]}return getCharWeight(b,"$")}exports.test=function(a){if(1===a.length)return"a"<=a[0]&&"z">=a[0];for(var b=0,c=0;c<a.length;++c)"'"===a[c]&&++b;c="bo's'n's fo'c's'le fo'c's'le's fo'c's'les fo'c'sle's ha'p'orth's".split(" ");return 3<=b?0<=c.indexOf(a):0<getWordWeight(a)||checkWithBloom(a)};