function Bloom(t){this.m=t,this.buckets=[]}function fnv1(t){for(var e,n,r=2166136261,o=0;o<t.length;o++)e=t.charCodeAt(o),n=65280&e,r=n?fnvMultiply(r^n>>8):r,r=fnvMultiply(r^255&e);return fnvMix(r)}function fnv2(t){return fnvMix(fnvMultiply(t))}function fnvMultiply(t){return t+(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)}function fnvMix(t){return t+=t<<13,t^=t>>>7,t+=t<<3,t^=t>>>17,t+=t<<5,4294967295&t}function test(t){if(t.length>13)return!1;if(t.length<6)return check(t,short);var e=check(t.slice(0,Math.min(t.length,6)),bloom),n=t.length>6?check(t.slice(6),right):!0,r=sex.test(t.slice(0,2)+soundex(t.slice(2,Math.min(t.length,10))).toLowerCase()),o=check2(t,hash4);return e&&n&&r&&o}function check(t,e){return e.test(t)}function check2(t,e){for(var n=0;n<t.length-3&&5>n;n++)if(!check(t.slice(n,n+4)+n,e))return!1;return!0}function init(t){bloom=new Bloom(28e4),right=new Bloom(9e4),short=new Bloom(4e4),hash4=new Bloom(4e4),sex=new Bloom(9e4);for(var e=0;8750>e;e++)bloom.buckets[e]=t.readInt32BE(4*e);for(var e=8750;11563>e;e++)right.buckets[e-8750]=t.readInt32BE(4*e);for(var e=11563;12813>e;e++)short.buckets[e-11563]=t.readInt32BE(4*e);for(var e=12813;14063>e;e++)hash4.buckets[e-12813]=t.readInt32BE(4*e);for(var e=14063;16876>e;e++)sex.buckets[e-14063]=t.readInt32BE(4*e)}module.exports={test:test,init:init},Bloom.prototype.loc=function(t){var e=fnv1(t),n=(fnv2(e),e%this.m);return 0>n?n+this.m:n},Bloom.prototype.test=function(t){var e=this.loc(t);return 0!==(this.buckets[Math.floor(e/32)]&1<<e%32)};var bloom,right,short,hash4,sex,soundex=function(t){var e=t.toLowerCase().split(""),n=e.shift(),r="",o={a:"",e:"",i:"",o:"",u:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,d:3,t:3,l:4,m:5,n:5,r:6};return r=n+e.map(function(t,e,n){return o[t]}).filter(function(t,e,r){return 0===e?t!==o[n]:t!==r[e-1]}).join(""),(r+"000").slice(0,4).toUpperCase()};
